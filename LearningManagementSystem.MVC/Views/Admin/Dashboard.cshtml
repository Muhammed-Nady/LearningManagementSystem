@model LearningManagementSystem.MVC.Models.AdminDashboardViewModel
@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="container my-5">
    <h2 class="fw-bold mb-4">
        <i class="bi bi-shield-lock me-2"></i>Admin Dashboard
    </h2>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
  @TempData["Success"]
   <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
 </div>
    }

    <!-- Statistics Cards -->
 <div class="row g-4 mb-5">
   <div class="col-md-6 col-lg-3">
   <div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #667eea!important;">
           <div class="card-body">
      <div class="d-flex justify-content-between align-items-center">
     <div>
 <h6 class="text-muted mb-2">Total Users</h6>
<h2 class="fw-bold mb-0">@Model.TotalUsers</h2>
   </div>
   <div class="display-4 text-primary opacity-25">
     <i class="bi bi-people"></i>
        </div>
    </div>
          </div>
       <div class="card-footer bg-transparent border-0">
   <a asp-action="ManageUsers" class="small text-decoration-none">
 Manage Users <i class="bi bi-arrow-right"></i>
    </a>
     </div>
    </div>
 </div>

        <div class="col-md-6 col-lg-3">
     <div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #28a745!important;">
     <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
   <div>
     <h6 class="text-muted mb-2">Active Users</h6>
   <h2 class="fw-bold mb-0">@Model.ActiveUsers</h2>
     </div>
    <div class="display-4 text-success opacity-25">
    <i class="bi bi-person-check"></i>
       </div>
          </div>
             </div>
       <div class="card-footer bg-transparent border-0">
   <span class="small text-muted">
              @((Model.TotalUsers > 0 ? (double)Model.ActiveUsers / Model.TotalUsers * 100 : 0).ToString("0.0"))% active
      </span>
           </div>
   </div>
   </div>

     <div class="col-md-6 col-lg-3">
    <div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #ffc107!important;">
     <div class="card-body">
   <div class="d-flex justify-content-between align-items-center">
     <div>
         <h6 class="text-muted mb-2">Total Courses</h6>
  <h2 class="fw-bold mb-0">@Model.TotalCourses</h2>
         </div>
         <div class="display-4 text-warning opacity-25">
   <i class="bi bi-book"></i>
     </div>
    </div>
       </div>
     <div class="card-footer bg-transparent border-0">
       <span class="small text-muted">
     @Model.PublishedCourses published
     </span>
        </div>
      </div>
        </div>

   <div class="col-md-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100" style="border-left: 4px solid #17a2b8!important;">
    <div class="card-body">
       <div class="d-flex justify-content-between align-items-center">
     <div>
         <h6 class="text-muted mb-2">Categories</h6>
          <h2 class="fw-bold mb-0">@Model.TotalCategories</h2>
           </div>
  <div class="display-4 text-info opacity-25">
             <i class="bi bi-grid"></i>
      </div>
    </div>
   </div>
   <div class="card-footer bg-transparent border-0">
 <a asp-action="ManageCategories" class="small text-decoration-none">
        Manage Categories <i class="bi bi-arrow-right"></i>
          </a>
                </div>
   </div>
 </div>
    </div>

    <!-- Quick Actions -->
 <div class="row g-4">
     <div class="col-md-6">
   <div class="card border-0 shadow-sm">
  <div class="card-header bg-white border-0 py-3">
    <h5 class="fw-bold mb-0">Quick Actions</h5>
  </div>
  <div class="card-body">
     <div class="d-grid gap-2">
       <a asp-action="ManageUsers" class="btn btn-outline-primary text-start">
         <i class="bi bi-people me-2"></i>Manage Users
  </a>
        <a asp-action="ManageCategories" class="btn btn-outline-info text-start">
    <i class="bi bi-grid me-2"></i>Manage Categories
 </a>
   <a asp-controller="Courses" asp-action="Index" class="btn btn-outline-secondary text-start">
      <i class="bi bi-book me-2"></i>View All Courses
       </a>
    </div>
   </div>
  </div>
        </div>

<div class="col-md-6">
  <div class="card border-0 shadow-sm">
     <div class="card-header bg-white border-0 py-3">
       <h5 class="fw-bold mb-0">System Info</h5>
         </div>
  <div class="card-body">
     <ul class="list-group list-group-flush">
    <li class="list-group-item d-flex justify-content-between align-items-center">
   Total Users
  <span class="badge bg-primary rounded-pill">@Model.TotalUsers</span>
      </li>
     <li class="list-group-item d-flex justify-content-between align-items-center">
    Active Users
       <span class="badge bg-success rounded-pill">@Model.ActiveUsers</span>
         </li>
       <li class="list-group-item d-flex justify-content-between align-items-center">
  Published Courses
      <span class="badge bg-info rounded-pill">@Model.PublishedCourses</span>
   </li>
       <li class="list-group-item d-flex justify-content-between align-items-center">
    Categories
  <span class="badge bg-secondary rounded-pill">@Model.TotalCategories</span>
     </li>
  </ul>
       </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Require admin role
  document.addEventListener('DOMContentLoaded', function() {
         if (!requireRole('Admin')) {
     window.location.href = '/';
     }
        });
    </script>
}
